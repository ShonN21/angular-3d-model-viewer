<!-- Sidebar Component Template -->
<aside class="w-72 bg-gray-800 text-white h-full flex flex-col p-4 space-y-6 overflow-y-auto">
  <!-- Header -->
  <h2 class="text-xl font-bold mb-4 text-blue-400">3D Model Viewer</h2>
  
  <!-- Time of Day Control -->
  <div class="space-y-2">
    <label class="block text-sm font-semibold text-gray-300">
      Time of Day: <span class="font-mono text-yellow-400">{{ formattedTime }}</span>
    </label>
    <input
      type="range"
      min="0"
      max="23"
      step="1"
      [value]="timeOfDay"
      (input)="onTimeChange($event)"
      class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"
    />
    <div class="flex justify-between text-xs text-gray-400">
      <span>00:00</span>
      <span>12:00</span>
      <span>23:00</span>
    </div>
  </div>
  
  <!-- Night Lights Control (only shown at night) -->
  <div *ngIf="isNight" class="space-y-2">
    <label class="block text-sm font-semibold text-gray-300">Night Lights</label>
    <button
      (click)="onNightLightsToggle()"
      [class]="nightLightsEnabled ? 
        'bg-blue-600 hover:bg-blue-700 text-white' : 
        'bg-gray-600 hover:bg-gray-700 text-gray-200'"
      class="px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 w-full"
    >
      {{ nightLightsEnabled ? 'Disable' : 'Enable' }} Night Lights
    </button>
  </div>
  
  <!-- Model Upload -->
  <div class="space-y-2">
    <label class="block text-sm font-semibold text-gray-300">Upload Model</label>
    <input
      type="file"
      accept=".obj,.fbx"
      (change)="onFileChange($event)"
      class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer"
    />
    <p class="text-xs text-gray-500">Supported formats: OBJ, FBX</p>
  </div>
  
  <!-- Camera Mode Control -->
  <div class="space-y-2">
    <label class="block text-sm font-semibold text-gray-300">Camera Mode</label>
    <select
      [value]="cameraMode"
      (change)="onCameraModeChange($event)"
      class="w-full p-2 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-blue-500 focus:outline-none"
    >
      <option value="orbit">Orbit</option>
      <option value="firstPerson">First Person</option>
    </select>
    <p class="text-xs text-gray-500">
      <ng-container *ngIf="cameraMode === 'orbit'">Mouse to rotate, scroll to zoom</ng-container>
      <ng-container *ngIf="cameraMode === 'firstPerson'">WASD to move, mouse to look</ng-container>
    </p>
  </div>
  
  <!-- Annotations Control -->
  <div class="space-y-2">
    <label class="block text-sm font-semibold text-gray-300">Annotations</label>
    <button
      (click)="onToggleAnnotations()"
      [class]="showAnnotations ? 
        'bg-green-600 hover:bg-green-700 text-white' : 
        'bg-gray-600 hover:bg-gray-700 text-gray-200'"
      class="w-full px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200"
    >
      {{ showAnnotations ? 'Hide' : 'Show' }} Annotations
    </button>
    
    <!-- Annotations List -->
    <div class="max-h-64 overflow-y-auto space-y-2">
      <div *ngIf="annotations.length === 0" class="text-gray-400 text-sm italic">
        No annotations yet. Click "Place Annotation" in the 3D view to add one.
      </div>
      
      <div
        *ngFor="let annotation of annotations"
        class="bg-gray-700 p-3 rounded-lg border border-gray-600 hover:border-gray-500 transition-colors"
      >
        <!-- Editing Mode -->
        <div *ngIf="editingAnnotation === annotation.id" class="space-y-2">
          <input
            [(ngModel)]="editingTitle"
            placeholder="Title"
            class="w-full px-2 py-1 bg-gray-600 text-white rounded border border-gray-500 focus:border-blue-500 focus:outline-none text-sm"
          />
          <textarea
            [(ngModel)]="editingDescription"
            placeholder="Description"
            rows="2"
            class="w-full px-2 py-1 bg-gray-600 text-white rounded border border-gray-500 focus:border-blue-500 focus:outline-none text-sm resize-none"
          ></textarea>
          <div class="flex gap-2">
            <button
              (click)="saveAnnotation()"
              class="px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors"
            >
              Save
            </button>
            <button
              (click)="cancelEditAnnotation()"
              class="px-2 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-xs transition-colors"
            >
              Cancel
            </button>
          </div>
        </div>
        
        <!-- Display Mode -->
        <div *ngIf="editingAnnotation !== annotation.id" class="space-y-2">
          <h4 class="font-medium text-white">{{ annotation.title || 'Untitled' }}</h4>
          <p class="text-gray-300 text-sm">{{ annotation.description || 'No description' }}</p>
          <div class="text-xs text-gray-400">
            Position: ({{ annotation.position[0].toFixed(1) }}, 
            {{ annotation.position[1].toFixed(1) }}, 
            {{ annotation.position[2].toFixed(1) }})
          </div>
          <div class="flex gap-2">
            <button
              (click)="startEditAnnotation(annotation)"
              class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors"
            >
              Edit
            </button>
            <button
              (click)="onDeleteAnnotation(annotation.id)"
              class="px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition-colors"
            >
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Reset Camera Button -->
  <button
    (click)="resetCamera()"
    class="mt-auto bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-lg font-bold transition-colors duration-200"
  >
    Reset Camera
  </button>
</aside> 